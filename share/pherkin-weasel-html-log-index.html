<html>
  <head>
    <meta name="generator" content="Pherkin::Extension::Weasel [% program.version %]">
    <title>Pherkin test report</title>
    <style>
      table.features {
         border: 0;
      }
      table.features tr:hover,
      table.features tr.failing:hover {
         background-color: gainsboro;
      }
      table.features tr.failing {
         background-color: tomato;
      }
      table.features td:hover {
         cursor: pointer;
      }
      table.features td {
         margin: 4px 20px;
      }
      table.features td.filename {
         font-family: monospace;
      }
      table.features td.title {
         font-style: italic;
      }
    </style>
    <script>
      function rc(elm, evt) {
         window.location.href = elm.getAttribute('data-href');
         return false;
      }
    </script>
  </head>
  <body>
    <h1 class="index">Pherkin test report</h1>
    <section class="index">
      <table class="features">
[% FOR feature IN features %]
        <tr class="feature [% IF feature.stats.fail; 'failing' ; END %]"
            data-href="[% feature.log_filename | url | html %]"
            onclick="rc(this, event)">
          <td class="filename">[% feature.filename | html %]</td>
          <td class="title">[% feature.title | html %]</td>
          <td class="total">[% feature.stats.fail+feature.stats.success %]</td>
[% IF feature.stats.fail -%]
          <td class="failing">[% feature.stats.fail %]</td>
[% ELSE %]
          <td></td>
[% END -%]
        </tr>
[% END -%]
      </table>
    </section>
  </body>
</html>
